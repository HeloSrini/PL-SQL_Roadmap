CREATE OR REPLACE PROCEDURE EMP_SAMPLE_SAL
(E_EMPID IN NUMBER,
 E_EMP_SALARY  OUT NUMBER)
IS
	CURSOR C1
	IS 
	SELECT SAL INTO E_EMP_SALARY
                   FROM EMP_SAMPLE
	WHERE EMPNO=E_EMP_ID;
	
	CR1 C1%ROWTYPE;

BEGIN
	OPEN C1;
	LOOP
		FETCH C1 INTO CR1;
		EXIT WHEN C1%NOTFOUND;
		DBMS_OUTPUT.PUT_LINE('Salary:' || CR1.E_EMP_SALARY);
	END LOOP;
	CLOSE C1;
END;
/

DECLARE
EMPNO  NUMBER:=&ID;

BEGIN
  EMP_SAMPLE_SAL(



CREATE OR REPLACE PROCEDURE EMP_SAMPLE_SAL
(E_EMPID IN NUMBER,
E_EMP_SALARY  OUT NUMBER)
IS
V_SAL  EMP_SAMPLE.SAL%TYPE;
BEGIN
    SELECT SAL INTO V_SAL 
    FROM EMP_SAMPLE
    WHERE EMPNO=E_EMPID;
E_EMP_SALARY:=V_SAL;
END;
/

DECLARE
A VARCHAR2(10);

BEGIN
 EMP_SAMPLE_SAL(7839,A);
 DBMS_OUTPUT.PUT_LINE('Employee_Salary:' || A);
END;
/

================================================================


SQL> CREATE OR REPLACE PROCEDURE EMP_SAMPLE_SAL
  2  (E_EMPID IN NUMBER,
  3  E_EMP_SALARY  OUT NUMBER)
  4  IS
  5  V_SAL  EMP_SAMPLE.SAL%TYPE;
  6  BEGIN
  7      SELECT SAL INTO V_SAL 
  8      FROM EMP_SAMPLE
  9      WHERE EMPNO=E_EMPID;
 10  E_EMP_SALARY:=V_SAL;
 11  END;
 12  /

Procedure created.

SQL> DECLARE
  2  A VARCHAR2(10);
  3  
  4  BEGIN
  5   EMP_SAMPLE_SAL(7839,A);
  6   DBMS_OUTPUT.PUT_LINE('Employee_Salary:' || A);
  7  END;
  8  /

PL/SQL procedure successfully completed.

SQL> SET SERVEROUTPUT ON;
SQL> /
Employee_Salary:5000

PL/SQL procedure successfully completed.

SQL> 



CREATE OR REPLACE PROCEDURE EMP_SAMPLE_SAL
(E_EMPID IN NUMBER,
E_EMP_SALARY  OUT NUMBER
E_EMP_NAME  OUT NUMBER)
IS
V_EMP_NAME  EMP_SAMPLE.ENAME%TYPE;
V_SAL  EMP_SAMPLE.SAL%TYPE;
BEGIN
    SELECT ENAME,SAL INTO V_EMPNAME,V_SAL
    FROM EMP_SAMPLE
    WHERE EMPNO=E_EMPID;
E_EMP_SALARY:=V_SAL;
E_EMP_NAME:=V_EMPNAME;
END;
/






CREATE OR REPLACE PROCEDURE EMP_SAMPLE_SAL
(E_EMPID IN NUMBER,
E_EMP_SALARY  OUT NUMBER,
E_EMP_NAME  OUT VARCHAR2)
IS
V_
BEGIN
    SELECT ENAME,SAL INTO E_EMP_NAME,E_EMP_SALARY
    FROM EMP_SAMPLE
    WHERE EMPNO=E_EMPID;
E_EMP_SALARY:=V_SAL;
END;
/



DECLARE
A NUMBER;
B VARCHAR2(13);

BEGIN
EMP_SAMPLE_SAL(2002,A,B);
--DBMS_OUTPUT.PUT_LINE(A,B);
END;

================================

CREATE OR REPLACE TRIGGER TRG_BUDIFER_LUQ_STUD_TEMP1
 BEFORE INSERT OR DELETE OR UPDATE ON LUQ_STUDENT
 FOR EACH ROW
 BEGIN
 IF UPDATING THEN
            INSERT INTO LUQ_STUDENT_TEMP
                                   VALUES (:OLD.REG_NO,
                               :OLD.STUDENT_NAME,
                              :OLD.DOB,
                               :OLD.SEX,
                               :OLD.TAMIL,
                               :OLD.ENGLISH,
                                :OLD.SCIENCE,
                                :OLD.MATHS,
                                :OLD.SOCIAL_SCIENCE,
                                   'UPDATED');
 IF((:OLD.TAMIL <>:NEW.TAMIL)
  OR (:OLD.ENGLISH <>:NEW.ENGLISH)
  OR (:OLD.MATHS <>:NEW.MATHS) OR
  (:OLD.SCIENCE <>:NEW.SCIENCE)
  OR (:OLD.SOCIAL_SCIENCE<>:NEW.SOCIAL_SCIENCE)) THEN
         :NEW.TOTAL :=  NVL(:NEW.TAMIL,:OLD.TAMIL) + NVL(:NEW.ENGLISH,:OLD.ENGLISH) +
           NVL(:NEW.MATHS,:OLD.MATHS )+
             NVL(:NEW.SCIENCE,:OLD.SCIENCE)+NVL(:NEW.SOCIAL_SCIENCE,:OLD.SOCIAL_SCIENCE);
END IF;
END IF;
 IF INSERTING THEN
     INSERT INTO LUQ_STUDENT_TEMP VALUES(:NEW.REG_NO,
      :NEW.STUDENT_NAME,
      :NEW.DOB,
      :NEW.SEX,
      :NEW.TAMIL,
       :NEW.ENGLISH,
      :NEW.SCIENCE,
      :NEW.MATHS,
      :NEW.SOCIAL_SCIENCE,
      'INSERTED');
    :NEW.TOTAL :=  :NEW.TAMIL+
                    :NEW.ENGLISH+
                   :NEW.SCIENCE+
                    :NEW.MATHS+
                   :NEW.SOCIAL_SCIENCE;
   END IF;
   IF DELETING THEN
     INSERT INTO LUQ_STUDENT_TEMP VALUES(:OLD.REG_NO,
      :OLD.STUDENT_NAME,
      :OLD.DOB,
      :OLD.SEX,
      :OLD.TAMIL,
       :OLD.ENGLISH,
      :OLD.SCIENCE,
      :OLD.MATHS,
      :OLD.SOCIAL_SCIENCE,
      'DELETED');
 END IF;
 END;

